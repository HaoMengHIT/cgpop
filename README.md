cgpop
=====

a mirror of cgpop https://code.google.com/p/cgpop/

use wget to download other data file (too big to put into github):

   wget https://cgpop.googlecode.com/svn/trunk/data/topography.0.1 -O data/topography.0.1

download http://www.cs.colostate.edu/hpc/cgpop/cgpoptiles.tgz to extract to
data dir, or you can use cginit to generate these files according to pdf file
in doc

provide new `deply.sh` to run cgpop. it would write pbs under run folder. you
must run at `run` folder to run cgpop correctly

build original
-----------------

    export NETCDF\_DIR=...
    ./build.linux

build llvm hack
------------------

this use -insert-edge-profiling to make profiling out. you need install
[llvm-prof](https://github.com/xiehuc/llvm-prof) first. makesure you add
correct pkgconfig dir to `$PKG_CONFIG_PATH`

    export NETCDF\_DIR=...
    export DRAGONEGG=...
    ./build.llvm

build debug symbol
-------------------

    modify build.\* script change `make` to `make OPTIMIZE=no`

run 
----

    modify deply.pbs.template properly,
    modify ~/.bashrc properly,
    ./deply.sh

================================================================================
CGPOP Miniapp Version 1.1
README FILE
-------------------------------

    Copyright (C) 2010, University Corporation for Atmospheric Research,
                        Colorado State University,
                        Los Alamos National Security, LLC,
                        United States Department of Energy
 
    All rights reserved.  See COPYING for copyright details
================================================================================

====================================
DESCRIPTION:
====================================

    The CGPOP miniapp models the conjugate gradient solver in the Parallel
    Ocean Program (POP 2.0) (http://climate.lanl.gov/Models/POP/).  There are
    several different implementations of the miniapp included in this package:
    
        - caf1D     Co-Array Fortran version using 1D data structure for
                    communication.

        - caf1D_sync_iamges

                    Co-Array Fortran version using 1D data structure for
                    communication.  This version overlaps computation and 
                    communication.

        - caf2D     Co-Array Fortran version using 2D data structure for
                    communication.

        - mpi1s1D   MPI version using 1-sided (put/get) communication and 1D
                    data structure.

        - mpi2s1D_overlap
                    
                    MPI version using 1-sided (put/get) communication and
                    1D data structure.  This version overlaps computation and
                    communication.

        - mpi2s1D   MPI version using 2-sided (send/recv) communication and 1D
                    data structure.

        - mpi2s2D   MPI version using 2-sided (send/recv) communication and 2D
                    data structure.

====================================
Installation and Usage Instructions
====================================

    See the technical report (cgpop-v1.0-tech-report.pdf) included in the 
    doc/ subdirectory.


====================================
DOCUMENTATION:
====================================

    CGPOP is commented so that it can generate Doxygen
    (http://www.stack.nl/~dimitri/doxygen/) documentation files.  Under each of
    the included implementations there is a '/doc/' directory that includes
    this documentation.  To view this documentation in a web-broser simply view
    the '/doc/index.html' file for the version you are interested in.  If you
    have doxygen installed, the documentation can be regenerated by running the
    'doxygen' command within a given implementation's directory.
